# Linux （开始时间：2021.2.13；结束时间：2021.3.19）

## 000. Linux初步认识

### 000. 系统的认识

操作系统：鼠标能点、键盘能输入东西、阅读看电影、可以扩展安装一些软件。人机交互。★

如果没装系统，开机，显示个品牌，就没了。

开机之后，看到的东西就是 系统，如果是一堆黑字，你看不懂，要么系统坏了，要么没系统。

### 001. Linux操作系统认识以及开源的提出，Linux有多个发行版本，搞清它们到底是什么

Unix 可以看作 Linux 的爸爸。

开放源代码（开源）：我写的代码我公开，公众于世界。人们都可以看到，并对其提出建议，来修改。

开源是非商业行为。★

安卓系统是开源的，它的核心就是 Linux 。

Linux 跟 安卓 是一样的，各大 厂商 拿来改改，发布属于自己的系统。因为 安卓 就是基于 Linux 。所以可以在国产的手机上看到 基于安卓的 ... 系统。

黑客必须要有 开源精神 和 共享精神 。★

如果你把学到的知识与你水平相当的人分享，他或许可以给你提出不同的思路，这样你们俩都能提高。那么如果是 14 亿人呢，这样你的产品就能变得非常完美，你就会变得非常完美，大家也会变得非常完美。

Linux 各种版本的 功能 和 用途，还有 面向的用户 不同。有些牛逼的 金融公司 ，名字不能说，就是使用的 定制的 Unix 系统。

我讲 Ubuntu, CentOS, Red Hat 和 Kali 。当然，我希望你们走完我的 Linux 课后都会。★

### 002. 开源一定免费嘛？

开源的不一定是免费的，比如：Red Hat ，是面向企业的。这个系统确实做得不错，福特 ，和一些 银行 就在用。

Red Hat 如果 个人 用，比如：学生 和 老师，是免费的；但是 企业 用，就不一样了，是 商业行为 ，要收服务费。

### 003. Linux用途以及千奇百怪的发行版本

类 Unix 就是，它爸是 Unix，它是根据 Unix 改过来的，可以这么理解。★

内核就是主要的东西，Linux 主要的部分。

GNU 通用许可证，就相当于 健康码，去超市买东西，他看到你有 健康码 ，戴了口罩，就能进去。就相当于遵守了这个规定，就能随便改，就是自由软件。

Linux 是指 操作系统 的 内核，我们平时就直接说 Linux 系统。就跟吃核桃一样，我们就说吃核桃，实际上吃的是里面的仁。★

服务器 就是企业用的超级电脑，用来存东西的。★

Linux 主要用在 公司的服务器上。这就是为什么你们要学 Linux 的原因。你们去企业必须要会 Linux 。绝大多数服务器都是 Linux ，除了微软的 Azure ，那是另外一回事。

连 路由器 都是 Linux 操作系统，没想到吧。Linux 比你想象的屌多了。★

我们学的主要就是 两套：Debian 衍生出来的 (Ubuntu, Linux Mint, Kali) 和 Fedora 下面的那些东西 (Red Hat Enterprise Linux (RHEL) , CentOS) 。就相当于 小米 下面有 红米，华为 下面有 荣耀 。★

主流的发行版 除了上面那两套，还有 openSUSE 。★

openSUSE 德国 一些 硬件 企业在用，中国用得不多。

Linux 本来就是开源的，鼓励大家安装不同的 Linux 版本，增加对 Linux 的认知。★

## 001. VMware虚拟机使用

### 001. VMware虚拟机

先把以前的 VMware 15 干掉，卸载。★

直接安装可能会出问题，比如说 硬件 支不支持，会不会 覆盖安装，安装的时候 服务 会不会主动停止。这些都是软件要考虑的范围。★

所以为了稳定，先卸载老版本。

### 002. VMware16 的安装

点击增强 -> 其余就该怎么安怎么安。

### 003. 老粉丝的15版本更新之后

VMware16 是可以找到原来安装过的系统的。

## 002. Ubuntu20.04

### 004. Ubuntu20.04安装

Desktop 就是玩儿的，漂亮的时候用的。

专业的人肯定是用 Server，企业也是用 Server 。★

只要把 Server 版的学会了，IT 界的 Linux 就够你玩儿了，横扫大街。★

Ubuntu Server 是我们的重点，但今天我们也要体验一下 Desktop 。★

#### 创建新的虚拟机

自己装的时候可以点 典型，但我们一般都点 自定义 (高级) 。

给别人推荐 Frank 的课，给 别人安装 的时候，把那些都展开，看一下，并且发出 哦哦哦 的感叹，显得你专业，是吧。

选 Ubuntu 64 位，别选错了。★

如果 系统更新 之后 右击 此电脑 ，没有 管理 了的话，右击 开始菜单 ，即 最下方左下角 任务栏上那个 Win 图标 ，点击 计算机管理，或者设备管理器。★

处理器配置，如果是 8 线程，就选 2 和 2；如果是 4 线程，就选 1 和 2 。我有 16 个，给的 2 和 2 。

内存，如果你是 8 G 的，给 4 G；如果你是 16 G，放心给 8 G，6G，都行。这里我给了 8 G，我 32 G。反正也用不完。

最大地盘大小 20 G 应该就够了。

将虚拟机存储位单个文件。★

我将 立刻占满内存 点上，反正我内存多，是吧。

不要装中文，你身为一个 黑客，你告诉我 英文 不会。英文是慢慢学的，慢慢培养的。★

Linux 是有 讲究 的，在企业里也不会选择中文。因为它 目录 如果有中文，那就麻烦了。

开发人员我们什么都不要，选择 Minimal Installation 。

Download updates while installing ubuntu 不能点，点了慢；在 虚拟机 玩儿，不用点 Install third-party software ... 。

格式化 硬盘 直接 continue ，装 双系统 不能这么玩儿。★

名字 起一个简单的英文名就行了，不要整些 中文 ，下划线 那些乱七八糟的东西。★

密码 可以搞个简单的，虚拟机 上测试。但在 企业 里不能这么玩儿。这太简单了。★

密码 和 用户名 一定要记住。★

Welcome to Ubuntu 那个页面如果 特别慢，一定要跳过。那下面的东西 一定要看，你身为一个黑客，一个专业领域的人，你要了解一下人家有什么东西，大概什么意思。★

其实 写代码 也是一样，报错了，你要看看人家写的是什么东西，人家过程发生了什么，看不懂的英文可以拿出来查查。★

多看这种东西，能提高你 修改代码 的能力。你每天看一点每天看一点，突然有一天报错了，你发现这东西好像在哪见过。然后你把这个东西拿 谷歌 上一搜，还真有这个东西。这叫做 经验 。★

你当然不可能全部一次全部看完，每天看一点，每天熟悉一次，慢慢就好了，这是个 积累 的过程。★

### 005. VMwareTools

按 win (super) 键，找到 Software & Updates (第一个 Soft ...) ，改用 阿里 的源，清华 的也行。让你 输入密码 就相当于 Windows 上的 以管理员身份 运行，你要点个 是 ，然后 Close 。★

然后点击 第二个 Soft ... ，更新软件，这下就快了。

更新慢 不要急，学习都急，以后怎么办？别急，有的是时间，慢慢等。★

#### 安装 Vmware Tools 两种方法

1. 现在不能安装 Vmware tools，关机，设置 此虚拟机 ，不使用 ISO 镜像文件，点击 使用物理驱动器 -> 否 -> 开机 。(Frank 方法)
2. 关机，将镜像文件删除，开机。(我的方法)

---

点击重新安装 Vmware tools 后有一个 tar.gz 文件，就相当于 压缩包，但在 Linux 上我们叫它 归档包 。就是将一个东西 打包。你可以理解为 压缩包，实际情况还 不一样。★

#### 安装 VMware tools

1. 将 tar.gz 包拷贝到桌面上
2. open in terminal
3. 输入命令：`ls` -> `tar zxvf VMware...tar.gz` -> `ls` -> `cd 解压出来的那个文件夹` -> `sudo ./vmware....pl`
4. 输入 yes，之后一直回车
5. 然后将桌面两个包删除
6. 然后点击 左侧任务栏 Files ，将 VMware tools 推了 (Unmount) 
7. 直接重启 或 使用命令`reboot`重启

### 006. Ubuntu20.04一些设置

随便设置一下。

Ubuntu Desktop 到此结束，就此打住。★

### 007. Linux其他发行版安装指导

有 企业 版的 Linux，和 社区版 的，社区版 的就比较简洁。

Arch Linux 是 极简 风格的 Linux，喜欢 折腾 Linux 的千万别错过这个系统。★

如果是安装其他的 Linux ，虚拟机 上 没有 这个选项的，如：Kali Linux，可以找它的 从属版本 ，Kali 是基于 Debian 的，所以可以选择 Debian 64 位。要自己去 网上 或者 官网 查具体什么版本。★

还有一种方法，这是 主要 的，找它的 内核 版本。★

每天装一个系统，有问题也没关系，反正体验了。主要是 体验 ，看能不能想起它们的 特点 是什么，去总结一下，这样你对 Linux 就有一定的 认知 了。★

Linux 这个东西，学会一个就都学会了。企业 中用的最多的就是 CentOS，和 Ubuntu 。

### 008. 下载指导

版本 无所谓。

#### CentOS 下载：

镜像文件 和 种子文件 随便下载，种子文件 可以用迅雷下载。

#### Kali：

下大的。

## 003.步入Linux的世界

### 001.Linux入门究竟要学什么——四大组成部分 ★ （重点）

Linux 入门不是学 " Linux "，而是：

1. 体验：比较和其他系统的 不同 和 相同 点。
2. Linux GUI （×）-> Shell （√）

但是要从 Shell 开始，也不合理。首先要 认识 Linux 。

Linux 四个部分：

1. Linux kernel (内核)（这是 核心 ），如果没了这个东西就不行。
2. GNU 工具
3. GUI Desktop 环境
4. Application 应用 (APP) 

前面两个是最屌的，先说 GNU ，内核 我们现在这个阶级还达不到。★

Linux 真正的名字是：GUN/Linux 。★

Linux 上一些常用的 软件，比如：和硬件搭配，这些就可能是 GNU 的人去开发。还有一些常用的 工具：比如 Unix 上面它有一些常用的 工具 ，比如：记事本 这种写东西的工具，Linux 本身是一个 内核，它本身没有，所以记事本这些东西就是 GNU 开发。★

IT 术语，它并不是遵循通常的英语音标，它有时候更遵循专业术语。★

Linux 当时出来的时候就是 GNU 工具 和 Linux 内核 一起出来的，合作出来的。所以全名叫 GNU/Linux 。★

### 002.GUI和GNU——Linux系统组成

我们使用 记事本 有两个选择，一个是 GUI，一个是 GNU ；GUI 和 GNU 本质上是属于 内核 的；内核 又本质上是属于 硬件 的。

![Linux 结构](F:\Note\Frank\My笔记（看完Frank的付费课后）\Linux\Linux 结构.png)

实际上 GUI 也是 从属于  GNU 的，本身 GNU 也可以操作 GUI，这是后话。

现在我们要学的就是 GNU ，而不是 GUI ，专业的人，不能只停留在 GUI 界面上。★

我们不能停留在 GUI 层面，应该停留在 GNU 层面，这个是对的。

### 003.Linux内核组成部分

内核 是非常复杂的，它是控制硬件的。

Linux 驱动不好折腾。

#### Linux 内核 到底负责什么东西？（有一门课叫 操作系统 ）

1. 硬件设备的管理、使用
2. 软件程序。既然我是一个系统，我就应该能够操作软件（本质上来说是操作进程）★。（还有一种最权威的说法 —— 管理进程）。我打开一个软件，它创建一个进程。我打开一个应用，占用了一个进程。
3. 系统内存管理：打开火狐浏览器，内存增加了；关闭，内存释放了。
4. 文件管理：下个小电影，或者记笔记保存下来。（保存文件，删除文件，修改文件。）

操作系统 最主要的就是这四个。★

还有一些东西，你们可以从操作系统这门课里面学到，这里就不讲了。

### 004. 开车警告——文件系统 (`df -T`查看)

文件管理 是个重点，比上面那三个还要重要。

#### 什么是文件系统？

文件 读 和 写 遵循的标准。★

就是说你和你女朋友在床上遵循什么姿势，有的人喜欢这个姿势，有些人喜欢那个姿势。

#### 遵循标准的用处：

有不同的标准，就能决定什么东西。大家都懂，有的姿势容易怀孕，有的姿势谁爽谁不爽的。

我们有不同的读写标准，就有不同的套路。★

就相当于英雄联盟，你出一个传说装备，就能决定你接下来出什么装。有爆发型的，有持续输出型的。

如果你玩儿一个法师，你非要出 AD 的装备，是不是感觉不兼容。

---

文件系统 这里不是特别重点，但要提前解释一下。

面试的时候可能会问你一下，Linux 是什么文件系统，让你列举一下。

Linux 没有盘的概念，直接就叫分区。

如果你的 U 盘是 FAT32 格式的，它就不支持一次上传 4G 以上的文件。就必须格式化成 NTFS 格式，或者 exFAT （一般现在的闪存用的多）。

不同于 Windows ，Linux 不同的分区有不同的文件系统格式。★

Linux 根目录常用的格式就是 ext4 。★

不同的文件系统就有不同的读写标准，这个也是有讲究的。

这节课主要是 认识 文件系统，主要是 认识 ，后面再详细说。

### 005. GNU核心——coreutils and shell

GUN 组织：

Unix 上具有的一些软件，Linux 内核本身没有，所以 GNU 他们模仿 Unix，为 Linux 写了一些必要的软件。

GNU 核心：

原本在 Unix 上的一些命令和工具，被模仿（移植）到了 Linux 上。

供 Linux 使用的这套工具，叫做：coreutils 。

coreutils 分三个部分：遵循的操作系统原理。

1. 用来处理文件的工具
2. 用来操作文本的工具
3. 用来管理进程的工具

千万不要在 Linux 上的任务管理器上给某个进程 stop 一下，在 Windows 上停止了，还能启动，在 Linux，有的东西 stop 了就没了，整个系统就废了。在 Linux 上，甚玩儿。★

Linux 不需要分很多个盘，一个就够了。

GNU 还提供了一个东西，叫 Shell 。我们入门的东西在这。★

Shell ：提供给用户使用的软件。用户拿它来使用电脑，并且和电脑交互。

命令行壳层（shell）提供一个命令行界面（CLI）；图形壳层（shell）提供一个图形界面（GUI）。

CLI，是命令行界面的缩写，一定要记住。★

我们要掌握的 Linux 的核心就是 CLI 。我们的关注点就在这。★

我们一般说的 Linux Shell 通常特指 CLI 。★

### 006.Shell——CLI和GUI

之所以要认识这些东西，是非常关键的，它跟 Windows 完全不同，我们必须要认识这点，否则后面就没办法装逼操作。先锻炼内功，慢慢来。

#### CLI 中有哪些有意思的 Shell ？

bash shell ：几乎所有的发行版都遵循它。（基础 shell ）

zsh ：最著名的第三方 shell 。我们后面使用 Mac 的时候，大多数人都先装的 zsh 。zsh 好用。它包含了下面所有的这三个，很牛逼。还提供了一些高级的编程特性，软件工程师一般都用的是 zsh 。所以我们第一手拿到苹果电脑的时候，一般都先装 zsh 。谁 tm 没事儿拿着在那界面里面乱点，没啥意思。(从 2019 年起，MacOS 的默认 shell 从 bash 改为 zsh —— From Wikipedia 。) ★

ash ：在不同的环境下运行。

korn ：数学浮点运算。

tcsh ：纳入一些 C 语言。

现在流行一个 oh-my-zsh 项目，这个项目非常屌。非常好看，各种各样的主题和插件，供你使用。他们的项目团队非常强。★

MacOS -> （类）Unix，专业人选择。

我不明白，买苹果电脑的人，为什么要安装 Windows ？

Unix，它跟 Windows 不一样，它非常的屌，很多人都不会用。有些人买了苹果电脑，从来都没有打开过自己的终端。

这是不同的 shell ，大家了解一下就行了，各种装逼的版本都有。

### 007. GUI Desktop —— XW KDE GNOME Unity

随着时代的发展，大家逐渐意识到，CLI 并不适合普通用户使用，更适合专业人员使用，这是从 Windows 发布开始，大家意识到，GUI 可能更加适合普通用户去使用。

Windows 的发展正好推动了 Linux 开源社区去做 GUI 这个事情。因此，Linux 桌面环境由此而生。（20 世纪 90 年代初期）。

Linux 的 GUI 主要有四种：

1. 最早的 X Windows ，主要是模仿 Window 。很早了，然后后来根据它衍生出来以下三种。
2. KDE （苹果电脑：基于 KDE。CentOS？Windows ），很牛逼。使用 Qt 开发的，你知道 Qt 多牛逼了吗。KDE 最大的特点就是，有菜单，为程序设置快捷方式，有任务栏，能最小化应用。★
3. GNOME ，主要是红帽在用，本来就是它作出的最大的一部分贡献。
4. Unity，Ubuntu 。它就是为 GNOME 开发，但是有不同，它并非一个桌面套件。

讲了这么多，就是要告诉你这些操作系统的发展史，历程。

### 008. 章节结束语 1

我们讲了 Linux 的一些基本知识，可能操作系统会讲。

给你们扩展一点知识，别小看这些知识，非常重要，如果没有这些知识，后面你都不知道 Linux 到底要学啥。★

所以 Linux 内核 和 shell 是最重要的，其他两个上面几节课都已经给大家介绍了。那两个没有必要解释，不是我们关注的重点。★

理论知识到此结束，这些是有必要的。

对 Linux 内核后面可能讲个入门，或者不讲。我们最重要的是 shell。

### 009. 章节结束语 2

这一块希望大家一定要有笔记，要画出 思维图，这个图不是我给你的，一定要你们自己画。谁和谁的从属关系啊，分为好几类啊，不要偷懒，这个非常重要。★

这个图一定要画（思维导图），因为画完之后你就对 Linux 理解非常深刻。

笔记要你们自己记，随便怎么记，我不会限制我学生的思维。比起给你 PPT ，我会引导学生去开发出自己的简历。

### 总结（思维导图）

![思维导图](F:\Note\Frank\My笔记（看完Frank的付费课后）\Linux\Linux 基础知识（理论）总结\思维导图.png)

## 004. 终于！Shell命令，我来了！

### 001. CLI准备

以前没有这么先进的桌面环境的时候，也没有有鼠标，只有一个显示器和键盘，80 后都知道。那时候开机显示的就是黑色的，只有字符这种。

tty5：虚拟控制台 5 ；tty （teletypewriter）：打字机 。这是一个非常古老的词，意思就是只能发送消息的机器。

CLI 的发展史，再也没有这种课了，会的要不都去 985 当教授去了，要不谁没事儿给你讲这个？这是一个系列，在传说故事里。这里先不讲，怕你们等不及了，听了这么多理论，想用命令了。

最古老的 Linux 就是这样的（Server 版的那种）。

Shell 的发展历程也是非常有意思的，大家可以去搜一下。

终端我们有一个非常好听的名字，仿真器。这都是古老的历史了，了解它，可以装逼。

Linux 上的快捷键 Ctrl + Shift 实际上可以按 Ctrl + Alt ，不信可以去试一下。★

终端的颜色可以随便调，字符编码 UTF-8，都知道的。

字体一般用默认的，非要调的话，一定是等宽字体。★

不是等宽字体太头疼了，因为接下来都是命令操作，你分号中文英文分不清，乱搞。

终端的声音，新手不建议关掉，关掉就没有提示了。

接下来进入独占模式，终端全屏，以后就不要搞界面了，都是这种，界面给我停掉。★

### 001-2

一般情况下咱们都是用 shell ，界面版不多用，咱们学 Linux 主要就是 shell ，没别的。

我们在 Shell 中输入一条命令，回车，就会执行，就相当于 Windows 中的软件，双击，它会执行。

### 002. 打开CLI终端 terminal

![命令提示符前面那串字符](F:\Note\Frank\My笔记（看完Frank的付费课后）\Linux\命令提示符前面那串字符.png)

终端中命令提示符前面那串字符：`fuck@fuck-virtual-machine`，用户名@计算机名。为什么要以这种方式？因为 Linux 下是允许多人操作这个终端的，这样为了区分谁执行了这条命令。而且 SSH 远程服务器的时候一定要 用户名@服务器地址名（ip），这是有讲究的。★

如果觉得计算机名太长了可以改，可以用命令，也可以不用。

不用命令的方式：Settings -> About -> Device Name 。

$ (dollar 符)：等待用户输入。。。

### 003. 搞定 Linux 命令参数，自由使用命令

Linux 命令这么多，不可能全部教，一辈子都学不完，每个软件的命令也不一样。只教常用的，剩下的基本能搞定。

英文看不懂怎么办？有一个网站：https://wangchujiang.com/linux-command 

那个网站下面列出的那些实例是比较常用的，上面的有些用的并不多。

这些选项都可以去试试。不是所有的东西都用过，包括我自己，有的不常用。

一般情况下：`ll`代替`l -l -a`。★

有些东西非常有意思，可以去研究一下。不是说所有的东西都能学会的，那不可能，没有这样的人。★

`ls -1`可以让文件竖着排列。

`ls`命令最常用的就是`ll`，没有比这更屌的了，最简单，最实用。★

多练习，这个非常重要，不练习不行。不仅要把笔记记下来，还要多练习。★

还有一个非常常用的：`ls -ltr`根据修改时间输出。

还有一个装逼的`ls --color=auto`根据颜色进行分类。这里写的 auto 。

不用所有的命令都记住，只要记住一些常用的就可以了。

Linux 的东西不需要你所有的东西都会背，那是不可能的。只要你熟能生巧，练习的时候用到了，记不清了就在网上搜，或者直接到上述网站上去找，随便你。★

### 004.Linux根目录

Windows 分盘，盘符：C D E F 。。。插个 U 盘，显示 H 。。。

Windows：盘符：路径

在业界中有非常重要的一句话：Linux 一切皆文件。★

有些文件一旦你误操作了，系统直接就崩了。所以 Linux 权限太高了。（不要打开显示隐藏文件，万一哪个小朋友把你的 .bashrc 文件打开，一修改，你傻逼了，终端打不开了。）★

Linux 根目录不要去动它，可能你删一个，系统就炸了。一般情况下我们不会去动它，除非你要配置一些东西的时候。★

### 005.Linux根目录解析

Linux 没有 C 盘 D 盘之分，所以 Linux 装软件的时候直接装就行了，他会默认给你创建到一个目录里面，不用管，非常人性化，不像 Windows 。★

/bin 二进制目录，GNU工具在里面，还有使用的一些命令都在里面（ls 等自带的命令）。（二进制文件相当于是把程序已经编译好的。）这是多用户级的。

所以 GNU 的命令这么多，学不完的。它不做的命令也有，后面我们要安装。★

/cdrom 光盘

/etc 系统文件配置目录（尽可能不要去动它，现在还不懂）。相当于 Windows 中的注册表，和 C 盘中的 Windows 文件夹

/lib 库目录，存放一些系统应用程序的库文件

/lost + found ：断电了，有很多丢失的文件，或者说放一些临时文件，主要是断电了。

/mnt 挂载目录（什么叫挂载？相当于一跟线，插到了硬盘里面，或者插到了主机上）。比如： U 盘，mp3 ，手机插到电脑上，这时候他会默认挂载。挂载可以理解为：外在设备和电脑进行连接。挂载目录会显示在 /mnt 上。所以要找 U 盘，在 /mnt 里。

/proc 这个目录不用多关心它，这个目录还有个名字，叫虚拟文件系统。你的电脑上有一个虚拟文件，可以这么理解。简单来说它叫伪文件系统。这跟你电脑监控，内核的东西有关了。新手不用刻意去理解它。

/run 运行目录。放的系统运行的文件。比如：打开 firefox ，它可能将它运行时临时的文件放在里面。当你关闭这个应用的时候它可能会帮你删除，也有可能不删除。

/snap Ubuntu 的产物，相当于 Ubuntu 上的 Ubuntu Software，可以这么理解，安装了一些软件，可能和沙盒一些东西有关，不用去可以理解。

就举一些常用的，有些东西不常用说了也没用，有的还是 Ubuntu 特有的。

/tmp 临时目录，放一些临时的工作文件。Windows 也有临时文件，C 盘属性 -> 清理 -> 清理系统文件，这个临时文件就是 tmp 。（就是 C 盘中的 temp 文件夹）。一般情况下不用去管它，当然有些黑客感兴趣，可能会知道一些重要信息都放在这里，可能会提取一些信息。这个是后话，不是我们这节课关注的重点。

/var 可变目录，存放一些经常变化的文件。如：log（日志文件）

非常有意思，所以说 Linux 的文件名都非常有意思。

/boot 启动目录，一旦你动了这里面的东西，你电脑开不开机了都有可能。慎用。

/dev 设备目录，创建一些设备节点。相当于 Windows C 盘 -> 管理 -> 设备管理器 这些东西。驱动程序，Web 端口这些东西。你所有的硬件在里面。不用去管。

/media 媒体目录，相当于可移动设备的挂载点。/mnt 是主要的挂载目录，实际情况你也可以选择 /media 目录。就相当于有些 mp3 或者手机，你插在电脑上他就自动识别了，自动播放了，这种就属于 /media，那没有播放的可能就是 /mnt 。可以这么理解。有人说 Frank ，你胡说八道，但只有这样讲才能让新手理解这个问题。就是说这两个确实是有区别的。所以有时候你 /media 里找不到，就去 /mnt 里面去找。

如果你玩儿 Android，拿到 root，你会发现 /mnt 下面有个 sdcard 。sd 卡也是外在设备。

总之，它们就是常用的挂载点，这两个都可以。

/opt 可选目录，相当于存放一些第三方的一些软件包和数据。可能不是 Linux 自带的，是其他厂商的。

/root 这个目录非常屌，管理员目录，不要去搞它。

管理员的权限是可以修改电脑所有的文件。所以删库命令：`sudo rm -rf /*`，必须要 sudo 。所以一般在大的企业当中，他是不会给你管理员身份的。

/sbin 系统二进制目录，存放 GNU 中高级管理员使用的命令或工具。进去看一下，你会发现这些命令你都没用过，高级管理员用的。

/srv 服务目录，就是你运行的一些服务，本地服务。就相当于 Windows 中的服务。

所以 Linux 中都是文件，没有 Windows 中那些各种各样的东西，稍有不慎，满盘皆输。

/usr 用户二进制目录，大量的普通用户使用的 GNU 工具。/bin 是多用户级的。

所以自己安装的软件在 /usr/bin 下面，这是当前用户的。

如果不能体会的话，多用用就知道了。可能讲的不是特别清楚，目录太多了，谁都不可能一时间全部接收。那为什么要详细讲，因为有个印象，万一哪一天可能你忘了再看看，如果说非要用到的时候你慢慢就熟悉了。Windows 也是一样的，C 盘中的文件夹到底是啥，想不起来了，网上搜索。

所以说操作系统不是一开始硬背学会的，而是有这么一个学习的过程，使用的过程。注意，使用非常关键，你没事的时候经常打开这些文件，经常操作里面的东西，你就记住了。所以说这个东西不是非得要会背。★

FHS（文件系统层级标准）这种文件系统是常用的，不只在 Ubuntu 上，在其他 Linux 上也会有。基本上很多的发行版都使用的这个标准。这个标准有时候会更新：官网：pathname.com/fhs ，更新一些标准，所有的 Linux 开发者，开发文件系统的，都遵循它。牛逼的同学可以看看它到底写了什么东西。英文不错的可以看看。这就是非常全的。只要你把这个搞定了，你所有的目录都搞定了。当然看不看都无所谓，知道它是干啥的，没必要去深究了。你要有闲余的时间，你英文好，要深究，我也没话说。如果你深究了，Linux 文件系统相当于你精通了，他是最全的，没有比这更全的了。有兴趣的同学可以去学一下。★

### 006.cd命令

上节课的东西不熟悉多进去看看。

文件系统一定要知道。★

### 007.Ctrl+C在Linux上是啥

命令执行到一半，不想执行了，强制退出。

Linux 中`M-`表示 Alt 键。★

Linux 的复制：Ctrl + Shift + C

MacOS 中，专门为了解决这个问题，搞了个 command 键。

Linux 没有撤销这个概念，Linux 终端中输什么命令是不能撤销的。在编写文档的时候是可以撤销的，后面再说。

### 008.绝对路径

### 009.相对路径

### 010.Linux上的路径

### 011.如何练习★非常重要

多练习，多创建几个文件（取有意义点的名字，方便记忆，杜绝 1.txt），在 /home 目录里面的那几个目录来回晃悠。

### 012.ls进阶用法文件夹下 各种匹配过滤符号

`ls Documents -FR`：装逼 ：别人看不懂。

ls 的 `-F`选项：如果文件后面带星号（`xx.pdf*`），可以双击打开（可运行），可以这么理解。★

如果文件夹带引号，说明它可能是一个副本。★

`ls`后面可以加正则表达式过滤：

1. 文件扩展匹配符：`*`表示多个字符，`?`表示单个字符。
2. 元字符通配符：`[]`，例子：过滤文件`fuck.txt`、`fack.txt`、`fbck.txt`、`fzck.txt`，使用命令：`ls -l f[a-x]ck.txt`（查找字母范围 a-x 的字母）；`[!a-x]`：取反。★

### 013.touch

命令这个东西，没有人能全记完，这是个锻炼的过程，长期用的过程中，就能体会到它的魅力。★ 

可以使用组合命令（执行两条命令）：使用`&&`：`cd ../ && ls -al`，进入上一层目录并 ls 。★

`touch`：可以更新文件最后修改的时间（不是覆盖，里面的数据还在，只是更新时间。★

### 014.cp

这个命令太强大，跟 ls 一样强大。★

`cp 1.txt 2.txt`：`2.txt`如果存在，会覆盖（使用`cp`命令别这么玩儿，新手喜欢这么玩儿，企业里面不允许这么玩儿，严重警告）。★

所以`cp`命令要加`-i`，强制要求，这会询问用户是否覆盖，非常重要（如果询问，y 同意，n 拒绝，Ctrl + C 取消）。★★

拷贝之后时间是当前时间（包括覆盖）。★

`-r`复制文件夹。

### 015.练习cp递归和小技巧 ★

`cd -`：进入上一次的目录。★

### 016.终端光标移动技巧

Linux 是有不为人知的小技巧，但是现在不能教给你们，因为基础不扎实，用起来反而会误导你们。

后面的命令肯定是越来越长，越来越杂。★

主要是要练习。★

现在不要傻不拉姬的去网上搜很多工具，用多了你心里没数吗，cd 、cp 你都用不好，还在这扯淡呢。

一定要先把 GNU 的系统的命令学好，系统的命令都学不好还搞第三方的，开玩笑呢。★

#### Tab 制表符键

自动补全：在已经熟悉相对路径和绝对路径的内容的情况下，建议使用，避免打错路径，非常重要。★★

---

C 语言中为什么要用下划线命名法？因为在 Linux 终端中，Ctrl + 方向键 移动一个单词，如果两个单词（或者很多字母随意组成，用下划线隔开）之间有下滑线，光标就会在下划线处停止；如果删掉它们之间的下划线，那两个单词就被视作一个单词，直接跳过。★

---

#### 终端快捷键：★

`Ctrl + 方向键左右`：终端跳单词。（Windows）（Mac：Ctrl 或者 Command 键，自己去调试）★

`Ctrl + l`：将终端往上拉一个大空白，类似于`clear`。★

`Ctrl + a`：移到开头。

`Ctrl + e`：移到结尾。

`Ctrl + h`：相当于`backspace`。

`Ctrl + d`：相当于`delete`。

`Ctrl + f`：相当于 右方向键 。

`Ctrl + b`：相当于 左方向键 。

`Ctrl + t`：将光标前面的那个字母往后挪。★

`Ctrl + u`：往前删一行。★

`Ctrl + r`：搜索之前的命令。非常屌的命令。★

`Ctrl + k`：往后删掉一行。★

`Ctrl + p`：相当于 上方向键。（感觉跟 栈 差不多）★

`Ctrl + n`：相当于 下方向键。

`Ctrl + j`：相当于回车。

这些快捷键都记下来，记下笔记，或者写到博客上（放在网站上别人看到还能帮你更正，这是最好的学习方式。）。★

希望大家学习当中能够探索，精炼，学习更多的知识。★

### 017.lnk链接文件

Windows ：

叫做快捷方式，文件后缀：`.lnk` 。（ Windows 中可以直接把整个文件夹作为快捷方式 ）。

Linux ：

1. 符号链接（软链接） —— 就相当于 Windows 中的快捷方式。（要求：原文件或文件夹必须存在。）
2. 硬链接 —— 有点像 Windows 中在同一个文件夹下复制文件的 副本，但 Linux 中还不一样，Linux 下硬链接和原文件是用的同一个（即：修改副本，原文件也会被改），就相当于指针。（也要求原文件或文件夹必须存在）

### 018.符号链接和硬链接

`ln -s`：创建符号链接。（使用`ls -l`会显示出链接文件的指向，这时候你什么多重指针，高级指针，是不是就学会了）★

就相当于小孩放学回家，你等着，我找我老大去。

`ln`：创建硬链接，这时候`ls -l`就没有指向了，因为它是副本，实际上它也是有指向的。

#### 怎样看两个文件是否是一样？

看大小，如果是软链接，它和原文件的大小应该是不一样的，它是一个单独的文件；而硬链接则一样，它是副本。

#### 企业里用软链接还是硬链接？

没有讲究，看情况，一般情况下软链接比较多，因为`ll`一眼就能看出它是软连接，谁指向谁。★

#### 区别？

如果你的电脑只有一块硬盘，可以创建硬链接；但是不能将硬链接创建到另一块硬盘中。★

而软链接就可以随便指。★

所以通常情况下用 软链接，软链接强一些，因为谁也不知道服务器什么时候加一块硬盘。★

可以在网上再搜索一下，看一下，看看它们的优缺点，区别，一定要掌握，面试的时候很可能会问。它们的用途，区别很多人都分不清。★

面试的时候别人问，你就：这个我知道，打一个简单的比喻，抛出它的定义，限定它的范围。我还知道软链接有什么优缺点，硬链接有什么优缺点，分别用在什么地方。这样的回答，给面试官的感觉就是，你确实掌握了软链接和硬链接。但是你不能像我这样通俗的举例子，在面试官面前，要显示出你的专业水准，说一些专业术语。只是这个意思，当然如果碰到了特别实在的面试官，就没必要说这些专业术语了。见什么样的人说什么样的话。见人说人话，见鬼说鬼话，就这个意思。★

#### 注意事项：（有些时候可能面试官要恶心你，像我这种，老油条）

如果使用`cp`复制一个链接文件，可能会打不开。就相当于你把快捷方式发给你的朋友，他能打开吗？★

一个文件可以有很多个软链接，但是不要创建软链接的快捷方式，创建多了，就会造成混乱链接。造成各种麻烦。这就扯淡了。就给人脚踏两只船的感觉，绿茶婊，睡了一个还有一个，是吧，最后就会造成悲剧，最后你也不知道谁是真的。★

---

所以一般情况软链接比较广泛。

### 019.注意事项

注意软链接和符号链接的英文，它们是不一样的，如果要写学术论文，国际论文，写 Symbolic link，not soft link 。国际上符号链接用的更多。★

### 020.mv重命名

这个课学完实习的 Linux 部分就问题不大了。后面的 shell 编程，可以作为一门语言了。要搞懂 shell 编程，不是 1-3 年能够胜任的。

基础才是最重要的，什么 docker ，都只是一个软件，你把它拿来用一下，build 一下，走个流程，就叫精通 docker，去你妈的吧。★

---

mv 命令既能移动，也能重命名。★

man 文档有兴趣可以看一下，没兴趣直接干掉，听我来讲，我讲一些常用的，不常用的自己去练。这个无所谓的，这么多命令谁记得住啊。★

`mv -i`：也是覆盖文件之前询问用户。★

### 020.移动和骚操作

`mv test.c ~/Documents/pdf`移动后，`cd !$`，直接进入`~/Documents/pdf 文件夹` 。★

`cd !$`将上一条命令的最后一个字符串作为改命令的参数。

### 021.rm Linux最危险的命令之一，删库跑路了解一下

`sudo rm -rf /*`：千万别在公司用，除非你想坐牢 5 年以上，CEO 不把你砍死，直接把你告上法庭。★★

使用`rm -i`：删之前会提示，这时只有输入 y 才会删除。推荐使用，如果面试官问你`rm`最好使用什么参数，你就说`-i`。一定要养成习惯，否则后面你可能哪天习惯于`-rf`，输错了，你啥都不知道，就蹲牢子了。当你反应过来的时候，已经晚了。本来是想按 j ，然后碰到了 Ctrl + j ，就完了。有时候这种问题是不能避免的，别人跟你开个玩笑，喝个咖啡，跟你按一下回车，你 tm 就倒霉了。所以不要使用管理员身份。这不是开玩笑的，这个命令真的是非常危险的。而且有些运维人员给的权限过高，一进来就是 root ，就容易误操作。★★★★

后面我们可能可以使用一些 github 上的开源的工具来替代它，相当于回收站。有机会再说。★

一定要养成`rm -i`的习惯，如果要删目录，一定要确认一下。★★★

GNU 还把这个命令留着是因为它太强大了，有很多命令是基于它的。

后面用项目替代它也是非常可观的，后面再说。★

### 022.创建文件夹以及删除文件夹

处理文件夹学完了，GNU 的最基础的命令就完成了。

基础非常重要，尤其是文件夹之间的关系。这章的内容，哪怕有一个知识点落下的，你都要复习。因为这个就直接决定你后面，这个非常重要。这张我情愿你们不学那么快，但要学牢，太重要了。★★★

Linux 中其实没有文件夹这个概念，是目录，你要知道其实目录就是文件夹。Linux 说目录可能比较装逼一点。★

前面那些命令既能操作文件，也能操作文件夹，这就是 Linux 命令牛逼的地方。

`mkdir -p`：可以创建子文件夹。（最常用）★

`rmdir`：只能删除空文件夹，所以这个命令算是废了，没人用这个命令。一般情况下还是`rm`。★

下面是查看和搜索文件和文件夹，这个是非常重要的；搜索是比较难的。★

`find`这个命令非常强。你看它文档，就知道非常复杂，这些东西是需要细学的，不是你们想的那么简单。★

后面有些什么管道命令，联合命令，是市面上看不到的，3-5 年用的。有的可能实习生都不需要这些东西，有的可能实习生真的不会。这些骚操作实习生很难遇到，不会让你们去碰到。

现在只学了 GNU 命令的四分之一。

你下载了一些软件，不会前面那些基本的东西，你会用吗？如果学了，直接看人家的文档，你就知道该怎么用怎么用。基础是最重要的，基础不会，你就只能拷贝别人的命令，去用，还不知道这个命令是怎么回事，你不能自由的运用它。★★

Vim 是比较复杂的，给有些人的感觉就像指针一样，是有些人的噩梦，用起来不那么顺手的。Vim 这个编译器是非常骚的。

#### Linux 中五种主流的编译器：

1. Vim （编译器之神）
2. nano
3. Emacs （神之编译器）
4. KDE、GNOME 系列的编译器 （桌面上打开 txt 文件的编译器，这个有啥好学的？谁 tm 学这种，没人用。）

编译器讲完就是 shell 编程了，可能会讲，可能不讲。如果讲了，你们就有福了，这个价钱能买到 shell 编程，简直是太疯狂了。知道学 shell 编程意味着什么吗，你已经远远踏过实习生的标准了。因为很多实习生，它会 Linux 就不错了。很少有实习生会点 shell 编程。★

你想装逼，你想骚，你想黑人家电脑，你 tm 基础还差，想都别想，不可能。要慢慢学，不是说一开始啥都能学会。

每天看一个命令，就是上次给的查询命令的那个网站。它支持各种各样的版本，确实非常牛逼。这个项目确实给了初学者很大的帮助，但是也需完善，发现很多错误。有人提供了 dash 版本，为什么说 MacOS 对开发友好？这是 mac 上一个文件、文档查询工具，这个工具特别屌，涵盖世界上几乎所有的语言，所以用 mac 的同学有福了。这个软件还挺有用的，虽然我不需要，但以前在公司用过，它们的合作商都挺有名的。也可以使用 Linux 命令行版本的（使用 golang 版本的）。★

那个网站的 github 页面可以翻下去看看。所以 Linux 非常牛逼，所有的文档、软件都是开源的，后面要跟大家说怎么去用这些开源的项目。

就一天学一个，学一个都行。它有个命令列表。有的命令其实你看一下就行，也没必要所有的东西都学，因为不可能都学会。可以看一下，它给你列的命令也就这么多，够你玩儿了，几乎把你不大可能用到的命令都列举出来了。★

### 023-1.文件类型第一讲

flac、WAV 是无损的音频格式。

要查看一个文件的前提是什么？就是知道它的文件格式。

`file`：查看文件格式。

Linux 上的文本格式是 text，Windows 上是 txt，不要搞混。

### 023-2.文件类型第二讲

这个命令太简单了，没什么好说的，可以去练习。

### 024.cat,more,less查看文件命令

`cat`：打印文件内容到终端上，只适合一些短的文件（太长了还要翻，如果在 server 中没有滚轮怎么办？）。★

`cat -A`：$ 替代回车，^I 替代 Tab 。

`cat -n`：显示行号。

`more`：每次显示一屏。也没啥屌用，只能往前翻。★

`less`：这三个中最屌的。但也不常用，随便玩玩就行，后面还有更屌的命令，我们希望在查看的时候可以编辑它，是吧。★

如果不想编辑，只是想看看，也不用这些命令。★

这是打开文本文件的三大命令，大家要记住。★

### 025.tail和head

有些文件，如：音乐文件，视频文件。你用上面那三个命令根本没用，就相当于在 Windows 上右键，以记事本打开。

`tail`：查看文件最后几行。（log 文件就要看最后几行，看最近修改的。）★

`head`：头几行。

### 026.章节结束语

这章是最重要的。这些基本的命令你都要会，否则后面你没办法学。这章每个都要会，你可以不会一些高级的，但基础的必须掌握。★

练习是非常重要的环节。

## 005.更上一层系统上的shell

### 001.认识任务管理器

挂载就是排序。

服务的好处：随时监听用户的行为。

服务：随时随地等待你，为你服务。

### 002.linux当中的任务管理器 ps 和 top

`top`：装逼就行了，没啥屌用。

`ps`：这是我们的核心。它输出的是用户的进程，而图形界面的是系统的，因为叫 System Monitor 。★

谁说中国人必须要学英文才能编程？当然学习的过程总是好的，积累一些单词总是好的，纠正一些发音总是 OK 的。

`ps`命令可能在不同的系统上显示出来的风格不一样，它非常复杂，`man ps`文档中都几千行了，是 Linux 最复杂的命令之一。为什么复杂呢？就是因为有不同的风格（版本）。★

Ubuntu 上可能`ps`的参数是最多的，因为它使用的是 GNU 的长参数版。这些东西都要学会吗？是不可能的。这些东西太多了，不可能记得住，包括我。

`ps axo pid,comm,pcpu`：查看进程的 PID、名称 以及 CPU 占用率。（常用的。也不用去背，知道有这么个命令，多去手写一下就行了）。★

`ps -aux | grep named`：查看 named 进程详细信息。（又一个常用的）。★

`ps -A`：查看所有的。

`ps -l`：用详细的格式显示。

其他的你们进企业的时候自然会查，因为这些命令实在是太多了，没办法讲。★

PID ：就是医院的号，医院几千号人看病，就直接喊号，相当于身份证。PID 每时每刻是不同的，不可能你第一天去医院是 2 号，第二天也是 2 号。★

其他的命令也可以跟着练习一遍（Linux 命令查询网站），出错了很正常，不用刻意理解。★

在企业中如果有关进程的，`ps`参数一定要去看看，说不定会派上用场。这是我提前跟你们说的，尤其是运维的小伙伴。★★

### 003.kill

`ps -aux | grep gedit`：查看 gedit 的 PID 。

`kill PID`：结束进程。

kill 还有一些东西很骚，可以去学一学，你们不能依赖我。★

### 004.挂载

kill 最骚的就是`kill -9`，强制终止。★

有的需要强制终止，比如说：`kill mysql`、`kill tomcat`。★

我们输入的命令也算是一个进程。★

---

虚拟机关机 -> 编辑虚拟机设置 -> USB 控制器 -> USB 3.1（U 盘里边是蓝色的），如果你的 U 盘比较旧，就选择 USB 2.0 -> 将下面两个勾勾上 -> 开机，插上 U 盘，连接到虚拟机，会发现 U 盘能打开了，资源管理器中多了一个盘（连接到实体机也一样）。

挂载：本来那个盘是不存在的，当我插上 U 盘，它自动创建出了一个虚拟的盘，让我们使用，这个过程就叫做 挂载 。就是把一个硬件插到电脑上去，这个硬件本来不是存在在这个电脑上的，插上它自动为我们创建了一个东西，来供我们使用这个硬件，这个过程就是挂载。★

Windows 中的那些各种盘也是挂载，插上手机也是挂载。★

在这里（Ubuntu 20.04）U 盘挂载在`/media/user/USB`下。★

### 005.mount

Windows 上可以改变盘符，但一般不这么玩儿，改变了之后要重启，可能有些程序会出问题；而且有些盘符是固定的，改变也可能引起问题。★

可以尝试改变一下 U 盘的盘符。

VM Tools 是一个光盘，也是一个挂载点。

#### 改变挂载点：

`sudo fdisk -l`：查看磁盘分区，看 U 盘挂载到哪个设备上的。

`sudo mount /dev/sdb1 /mnt`：改变挂载点。

`sudo umount /mnt`：卸载挂载点。

U 盘挂载的真实路径是在`/dev/sdb1`（举例）下的，这个路径进不去。进入`/dev`，发现都是黄色的，这些都是设备。这个 U 盘的挂载点默认映射到`/media/fuck`下，我们可以通过`sudo mount /dev/sdb1 /mnt`来改变它的默认映射。（相当于把它从原来的映射又拷贝了一份到新的映射。）★

`mount`其他的参数自己去折腾，因为 Linux 本来就是靠你去折腾，而不是靠我去讲。★★

如果有任何的程序去使用它，系统就不会去挂载它。如果进入了挂载的 U 盘的路径（`/media/fuck/USB`），在这个目录下就无法卸载它，必须要退出来，才可卸载。就跟 Windows 一样，你在 U 盘中，点击弹出，它会提示该 U 盘正在使用。★

这两个命令知道一下就行了，不是特别重要。但有时候企业要求你用外接硬件，你要知道有这个命令。而且有些黑客就喜欢搞这玩意儿，给你整个`/media`自动挂载，自动复制，贼恶心。★

### 005-2.为什么要有挂载

以前的电脑是不能自动挂载的，现在可以。使用`df`命令可以看到挂载在哪里。★

以前只有一个分区，它不会给你自动挂载，需要使用`mount`命令手动去挂载。

#### 需要手动挂载的情况：

如果插上 U 盘没有弹出来 U 盘那个标志，可能需要你手动去挂载。使用`df -h`命令，如果其中没有跟你 U 盘大小相近的设备，也可能是驱动的问题，或者说之前 VMware 上那个 USB 的设置没有设置好，都有可能。

#### 需要更换挂载点的情况：

如果没有自动挂载，则需手动挂载；或者说挂载的目录没有写入权限，也需更换挂载点。★

#### 安全性问题：

在 Windows 上曾经有一个古老的 U 盘自动播放病毒，插上就自动播放，如果中招了就直接格式化 U 盘吧，文件也不用拷贝了，都中招了。

所以为了安全性，企业中 Linux 可能不会自动挂载，而是挂载到一个只能读，不能写入的目录中，以防止恶意脚本，这都是可能的。★

---

桌面版的就是为用户考虑了，所以有自动挂载。你不可能一开机，U 盘插上没反映吧；不可能一来就学`mount`命令吧。

我猜测的，你们可以理解为我在吹牛逼，也可以理解为这是一种说法；还有很多种看法，你们可能意见不一，你们知道有这样一个命令，可以选择分区挂载点，这样就行了。★

### 006.选听——安卓挂载

把安卓手机插到电脑上，连接到虚拟机 -> USB 偏好设置，选择文件传输 -> 在设置中找到 开发者选项 -> 打开 USB 调试 -> 以文件的方式进行调试 。

连上之后发现`/mnt`和`/media`里面都没有，可能在`/dev`或者`/run`下。结果我们发现在`/run/user/1000/gvfs`下。它是通过 mtp 协议连接的，通过 mtp 连接的设备都在这下面。发现不能换挂载点，一个 mtp 协议的怎么能挂载到一个为目录下呢。

挂载的目录一定是分区下的，不是一个绝对路径。插上 U 盘的时候是一个分区，你在目录下无法访问这个分区。我们要把分区挂载在目录上，明白这个点就 OK 。★

Linux 下有一个 adb ，管理 安卓手机 的工具。★

通过实验我们就能明白这点，是把分区挂载在一个目录上，非常有意思。★

### 007.df和du

`df`：（不是英雄联盟的 df 二连。）显示已挂载的所有磁盘情况。

`df`没人用，用处不大，吹牛逼的时候用。

有些命令`-h`是非常爽的，但也有些的`-h`是 help 。★

`du`：可以指定特定的目录上的磁盘使用情况，来看这块是不是使用最大的。

`du -h`：这个命令中最常用的就只有它。★

`du`其实作用也不是太大，说实话。但比 Windows 好，Windows 只能排序，还没有这个功能，这个一目了然。★

### 008.sort文件排序

硬盘上的操作就这些了（就`df`、`du`，一个挂载），最常用的就是`sudo fdisk -l`：看看当前电脑上插了多少个设备，然后根据硬盘设备进行分析。查看插入设备最常用的就是`df`二连，查看所有的文件目录映射到哪个点，一目了然。所以`df`二连可以经常用来学习的，它是个好命令，大家经常去看看这些命令，它是干什么的。这个命令非常好，`df`这个命令非常容易学习。★

#### 排序

`sort`：对文件里面的内容进行排序（默认以字符串的排序规则来排序）。以排序的形式展示给你，本质上原来的文件没有受到任何影响。★

`sort -n`：按数字大小排序。

`sort -nr`：倒序，没什么屌用。

`sort -M`：按月份排序，这个非常屌，进公司有日志文件，有些日志文件是以 月份 的缩写开头的：Jan, Feb, Mar ... Dec，就是为了方便用这个命令排序。这个命令在 log 文件中非常好用。log 文件会记录软件在什么样的时期，有什么样的问题。看软件出现什么样的问题，你就可以通过这样的命令来判断，筛选出你想要的月份，或者排序。屌吧，这是非常常用的，不是开玩笑的。其他的可能吹牛逼的，但这个还是非常屌的。★★★

`sort -Mr`：一般情况下是看最新的时间排序，所以得倒过来。★

---

有些东西实际上非常有用，什么`-k`、`-T`。★

其他参数可以自己研究一下。

参数是灵活的，人也是灵活的，有时候根据需求，可能会有不同的顺序。

Linux 中有个非常屌的目录，改密码的：`/etc/passwd`，显示系统中的一些密码。可以看到有些是加密的，可以破解，有时候不用破解，可以直接来到某个目录下面，把权限给改了，就可以直接使用 root 权限了，非常危险。★

这不是这节课重点，重点是这么多文件，我到底要找谁？这时候可以根据用户去排序。这个命令暂时不讲，有点复杂了。

#### 管道命令

`du -sh * | sort -nr`：如果直接用前半截命令，很多东西，很烦人，我们需要排序。★

管道命令的详情后面再说。

### 009.grep基础认识，搜索文件

搜索也是一个恶心的东西，因为要讲一个正则表达式，讲这个很多人就要劝退了，所以讲简单的。

`grep`：搜索就用这个搜索就行了。★

这个命令太流行了，很多命令都要使用它。它牛逼到什么程度？看看它的文档，多长（跟`ps`有得一拼）。又是一个牛逼的命令。★

`grep`和`ps`可以说是 Linux 当中最难用的命令之一，也是最复杂的。

`grep`不仅能根据字符串找，还能根据正则表达式搜索、反向搜索、匹配搜索（涵盖多少行匹配搜索），非常牛逼，它太屌了。正则表达式本身不属于 base shell 的内容，非常复杂，有人学 Java 学了点，都觉得恶心。★

`grep`现在可以当作过滤器来用。

现在要知道这个命令存在，它不仅能用来搜索文件，还能用来搜索一些其他的东西，非常屌。★

还有`fgrep`，可能现在没用到。

### 010.打包压缩归档解压缩

上面那个命令只讲了基础。

---

Windows 上有个非常屌的解压缩软件：WinRAR。还有些压缩软件：韩国流行的 bandizip，开源的 7-zip 。

Linux 上也是有的，但是可能与 Windows 略有不同。★

压缩在 Linux 中也叫压缩，还有个词叫 打包 ，说不准。

Linux 上压缩工具很多，常见的（自带的）：gzip（当然只能解压 zip 的包）。

还有一些压缩工具，已经落伍了。很久很久以前，Unix 的压缩工具，有个`.Z`的后缀，这太老了，没人用，这个是最古老的 Unix 上才出现的，你们这个年代应该不会出现了，不会有人用了。★

现在用的最多的是`gzip`（后缀是`.gz`）、zip（后缀：`.zip`）（7z 的后缀是`.7z`），还有一个`bzip2`（后缀：`.bz2`）。

所以你看到 Linux 中后缀名是`.gz`的，他用的压缩工具就是`gzip`。如：重新安装 VMware Tools，它给你个压缩包，其后缀名为`.tar.jz`，`tar`的意思就是打包，先打包再压缩，可以这么理解。★

gzip 是比较流行的，因为它是 GNU 的产物，非常好用，用着非常爽。★

gzip 可以和 tar 共同组成文件后缀。（注意：tar 是打包，不是压缩。）★

#### 为什么区分这两个概念？

Linux 中只能对一个文件进行压缩（不能压缩整个文件夹），而可以对多个文件进行打包。于是就只能将文件夹先打包成一个文件，然后再进行压缩。这就是`.tar.gz`的来历，很多人不知道这个。★

#### tar

压缩：

`tar -zcvf`：最常见的就是它，打包后以 gzip 压缩。`-f`只能在选项的最后，后面紧跟归档后的文件名称。★

`tar -cvf`：仅打包，不压缩。

解压：

`tar -zxvf`。

---

这两个是最常用的，其他的可以自己去研究，那个查询命令的网站上人家还是写的非常全的。★

简单吧，太简单了。

### 011.server上安装vmwaretools的方式

学会了命令，就不能在图形界面来解压 VMware Tools 了，显得你没有技术水准。★

#### 安装：

1. 首先，确定 DVD 连上了
2. 打开终端，F11，`df`二连，看它挂载到哪了
3. 可以使用`mount /dev/sr0 /mnt`将其挂载到我们想要的目录下（这里是`/mnt`），再`df`二连，可以看到挂载的目录已经改变，给你同学绕一波，是吧
4. `cd /mnt`，`ls`，`cp VMware ... .tar.gz /home/fuck/Desktop`
5. `cd !$`，`ls`，`tar -zxvf VMware... .tar.gz`
6. `cd vmware-tools-...`，`sudo ./vmware-install.pl`
7. `cd Desktop`，`ls`，`rm -rf VMware... vmware...`
8. `sudo umount /mnt`，发现没退掉，`/media`里面还有
9. `sudo umount /media/fuck/.../VMware... && umount /mnt`，装一手逼，两个命令同时执行。
10. `exit`，吹吹牛逼然后退出，别人：哇。（要的就是这种效果）

就可以了，全程用命令操作，装逼。前面有些步骤可以省略，自己看着办，那是装逼版本，有些并不是必须。这样只是告诉你学了这些有用。以后在公司里安装软件的时候是真的要选择一个挂载点的，而不是使用通常的挂载点，因为黑客可能会知道，大家都知道跑到`/media`下边去植入病毒。所以可能会有另起挂载点这样的要求。另起一个挂载点的时候我设成只读，不让它运行，我要想用的时候单独拷贝出来一个文件，非常聪明。★★

这样就是把每个知识点都用上了。

### 012.章节结束语

讲完基础 shell，后面就是些好玩儿的东西了。shell 没必要特别的去深知它，因为 shell 本身也是一个应用程序，从某种意义上来说可以这么说。★★

这块的 shell，我要求大家自己去探索，这里面的命令可能会在以后的学习或工作中用到某些参数，然后逐渐就会越来越熟悉它。也不是背，可能在使用的过程中慢慢就记下来了。讲不完的，这么多参数组合，使用的方式也不同。只能告诉你这个命令是干嘛用的，常用的参数是哪些，然后再做一些练习。★

以后学习或工作可能会遇到特殊的要求，就要去查阅文档。没有人可以说把全部参数背下来，那是不可能的事情，那简直是难以想象的事情，因为这仅仅是 base shell，后面还有更多的东西。光`ps`这条命令就上千行的注释，你也不可能把这些东西都记下来，也没有人疯狂到这种程度。★

所以这章就是如何使用基础命令，遇到特殊参数的时候如何查阅。★

## 006.父子shell

### 001.父子shell的概念

接下来可能比较难了，不只是命令了，要有心理准备。

#### 看使用的哪种 shell：

`cat /etc/passwd`，看第一行，或倒数第二行。

Debian 用的 dash，MacOS 是 zsh 。一般默认是 bash，不是 dash 。

bash 实际上是个软件：使用`ls -lF /bin/bash`可以展示出来。

还有 tcsh ，zsh ，在shell 上有很多软件。用的最多的是 bash ，比较常见。

实际上更改上面那个配置文件就能更改默认使用的 bash，但没那个必要。

---

打开终端，`ps`，再输入`bash`命令，没有显示任何变化。然后`ps -f`，发现有两个 bash ，两个 PID 还不同。★

这个时候看似只运行了一个程序，实际上有两个 bash，这时候需要`exit`两次才能退出（先退出的是后打开的那个（子 bash））。这分为 父 bash 和 子 bash ，父 shell 、子 shell 。★

如果输入两次 bash，就有三个 bash。使用`ps -f`显示出来的 PPID ，就是它基于谁创建的，是父进程的 PID 。★

有个专用名词：父 shell 。★

这就是 父 shell 到 子 shell 的过程。

`ps --forest`：显示出层级关系，很有意思。知道就行了，没啥用。★

别的东西下节课再谈，知道 子 shell 、父 shell 就行了。★

### 002.分号在命令里的作用

命令之间用分号连接，依次执行命令：`ls ; pwd ; cd /`（它叫 进程列表）。

打上括号：`(ls ; pwd ; cd /)`。

它们的 **区别**：

打上括号的那个是创建了一个子 shell 去执行。★

---

查看 **效果**：★

执行`ls ; pwd ; cd /`之后，执行`echo $BASH_SUBSHELL`，输出是 0 ，说明没有 子 shell 。（连起来使用：`ls ; pwd ; cd / ; echo $BASH_SUBSHELL`）。

如果执行：`(ls ; pwd ; cd / ; echo $BASH_SUBSHELL)`，输出结果为 1 。

执行：`(ls ; pwd ; (cd /) ; (echo $BASH_SUBSHELL))`，输出结果为 2 。

不能理解也没关系，先知道这个原理就行（创建 子 shell 去执行），这个 echo 那条命令后面会讲，先不讲为啥。★

自己的理解：打括号的话它先创建一个 子 shell ，执行命令，命令执行完成之后结束 子 shell 的进程。这就是为什么不打括号的进入了 根目录，而打括号的没有进入根目录。★

### 003.sleep 和jobs

`sleep 10`：让终端睡眠 10s 。（计划任务）

最近听学生说网上出了个什么倒计时删文件的病毒，倒计时就是这么玩儿的。★

`sleep 3&`：放后台执行。可以`ps -f`查看。★

所以学了系统的同学就喜欢看看任务管理器有没有什么流氓软件在搞事儿。（挖矿）★

`jobs`：专门查看后台进程。（企业中`ps -f`可能出来一大堆，不好看）★

`jobs -l`：可以查看 PID 。可能更实用，可以随时把它干掉。★

如果后台任务已经执行完毕，`jobs`会显示 Done，正在执行是 Running ，并且后面的`&`符号会消失。★

为什么需要`sleep`？因为有些软件确实需要延迟执行。★

### 004.后台用法的举例

那个符号 (&) 可以使用组合命令：`(tar -zxvf ... ; tar -zxvf ... ; cp ...)&`。就相当于解压缩的时候最小化，我自己看我的片儿。大家不要误解它。★

### 005.coproc协程

还有一个有意思的东西（协程）：`coproc frank_av { sleep 10 }`。（**注意** 大括号中间有两个空格，并且里面的命令要以分号结尾，这个非常重要）。★★

与直接使用`sleep`命令的 **区别**：它会创建一个 子 shell 。它是放在 子 shell 的后台去挂着。★

这个最好不要经常去用。虽然自由度很高，但是性能会大大的降低。★

但是要跟大家讲，有这么一个东西。非常重要。后面看到你能看得懂。网上很多教程都没讲这个东西。★

你们要听为什么，我后面再讲。

### 006.外部命令和内建命令

使用`ps -f`的时候他自己也算一个进程，就相当于 Windows 上打开任务管理器，任务管理器也算是一个进程。★

#### 为什么有的命令没有进程（`cd`、Windows 中的`dir`），而有的命令会单独创建一个进程（`ps`、Windows 中的 cmd 本身）？

`ps -f`命令本身就是查看 shell 中所有的进程，我在 shell 中执行它，要看清所有的进程，肯定需要 站在外部（上帝视角） 去查看，就像今天天气好不好，你肯定要出去亲自看一看。

![ps-f上帝视角](F:\Note\Frank\My笔记（看完Frank的付费课后）\Linux\ps-f上帝视角.png)

如何出去看看？

那就不能在 bash 里面玩儿了，要单独创建一个进程。（专业术语：forking 衍生）

![ps-f原理](F:\Note\Frank\My笔记（看完Frank的付费课后）\Linux\ps-f原理.png)

看看`ps -f`的 PPID，不难发现，它就是基于 bash 创建的。★

像这种要单独在外边创建进程，去看里面的 命令，叫做 外部命令；而像`cd`这种叫 非外部命令，也叫 内建命令（不叫内部命令）。不要说错了，说错了牙都笑掉。★

`type ps`：看`ps`是 外部命令 还是 非外部命令。★★

### 007.alias别名

`history`：查看历史命令。并不是所有的命令，一共 一千多 个，即使你把 bash 关掉了，它也有。★

`history`保存命令的数量可以更改（可能有些骚命令就是基于它的：`!!`、`cd !$`）。它保存在：`~/.bash_history`下。★

骚操作：先使用`history`查看历史命令，然后使用`!1320`：执行第 1320 条命令。★

`alias -p`：列出所有的别名。★

`ls='ls --color=auto'`是 Ubuntu 特有的，`ls`带颜色，可能在 mac 上就不带颜色。但是如果想在自己的电脑上这么玩儿，也可以这样定义别名。★

`alias li='ls -li'`：定义自己的别名。（缺点：退出 bash 就没了）后面再讲如何永久配置。★

### 008.章节结束语

熟悉这块内容，还是挺重要的，知识点不多，但是要求大家掌握，这些命令也要求大家掌握，熟用。★

## 007.环境变量

### 001.环境变量究竟是什么

这章可能有点难度，需要大家动手去操作。★

#### 为什么我们在 Win10 上直接按 Win 键，输入 notepad ；以前 Win7 的时代没有这么先进，使用 Win + R 调出运行，再输入 notepad ；或者 cmd 输入 notepad ，可以打开记事本？

要打开一个程序首先需要找到它：Windows 中，C 盘 -> Windows 目录 -> System32（这里面的东西千万不能删，删了你系统就崩了，绝对不能还原的）-> 搜索 notepad.exe -> 右击，打开文件所在位置。★

本质上你使用上面那三种方法打开的记事本，就相当于在这个目录下双击 notepad.exe 打开记事本。★

#### 为什么在任何目录输入 notepad 能运行 System32 目录中的 notepad.exe ？

它提前告诉你了，无论你在哪个目录执行 notepad，都必须回到 System32 下，这就是环境变量的作用。★

Windows 中，打开 高级系统设置 -> 环境变量，你会发现它已经把这些路径（System32）写入了。★

在任何目录输入 notepad 的时候，它会先到 环境变量 里面去找，就相当于提前 预约 了。（相当于你去餐厅定了个位置，你去说，我叫 Frank，带我去我的位置；它说你的位置在 ... 它已经提前将你的位置找到了。）环境变量就是预约，可以这么理解。★

这个预约它提前写入内存里了，你开机它提前写入。★

如果将一个 目录 写入环境变量，那么该目录下的所有程序，都能在任何目录下进行访问。★

就相当于你办会员一样，你有香格里拉酒店的会员，那你在全球任何有香格里拉酒店的地方，你都能享受它的会员服务。★

为什么有的同学学 Java 的时候要创建那么多环境变量，然后要在 cmd 里 javac ？因为你的 Java 目录下面就有一个应用程序，叫 javac.exe 呀，你要在任何地方运行该程序。Python 也是一样★

很多软件都默认配置了环境变量，它不配置，你就找不到它在什么位置。★

#### 环境变量的作用：

我提供最好的服务，全球通，我在任何地方都能访问环境变量的内容。

---

环境变量中的东西不要删，有的同学误删了，就有很多命令就运行不了了，那就嗝屁了，就找不到它了。★

只要它显示不是内部或外部命令，也不是可运行程序或批处理文件，那就是找不到它。★

还有很多环境变量，不只 PATH，比如说：TEMP 和 TMP ，定义了它，一些临时文件可能就放在这，比如：安装 QQ 的时候，它 **可能** 会找到这个目录，来存放临时文件。★

系统变量 下还有其他很多有趣的路径，一旦定义了，就能在 cmd 里直接用。★

### 002.全局变量和局部变量

Windows：

环境变量有两种：用户变量 和 系统变量。

系统变量：用户注销之后（换一个用户）cmd、notepad 照样用。★

用户变量：只能在当前用户使用。★

---

实际上在 Linux 中也是这样的：一个叫 全局变量，一个叫 局部变量。★

**全局变量**：不管几个子 shell ，我的 cd 、ls 依然可以用。我在任何目录都能使用它们。

`printenv`：查看所有的环境变量（全局变量）（相当于 Windows 中的系统变量）。★

`printevn USER`：只输出 USER 这个环境变量。★

`printenv HOME`、`echo $HOME`：输出 HOME 环境变量。★

不同的发行版全局变量可能不同。★

当我要使用全局变量的时候，可以用 $env 的形式。如：$HOME，它会去找 HOME 代表什么东西（ /home/fuck ）。★

Linux 下的 PATH 就相当于 Windows 下的 PATH 。★

Linux 下，只要你 PATH 错了，你就完了，有些命令就打不开了。有些同学把 PATH 改了，还改错了。★

**局部变量**：只在这个 shell 下起作用，关掉它，就没了。★

`set`：查看局部变量。（一大堆，啥也看不懂就对了）★

实际情况大家肯定用全局的用的多，局部变量有啥意思呢？局部变量作为了解就行了。★

但是在编程的时候，局部变量用的可多了。这个局部变量跟编程的那个局部变量还不一样。这两个是完全不同的概念，不要混淆。★

### 003.用户和局部变量的设定

局部变量大多都是用户变量（用户定义的变量），当然用户也可以定义全局变量，说不准，主要看用途。★

定义全局变量后面再说。

#### 定义局部变量：（缺点：再打开一个终端就用不了了，只能在一个 shell 里用，经自己尝试，即使是它的子 shell 也不能用；同理，在子 shell 里创建的局部变量，退出它，就没了。它只在自己的范围中生效。）★★

`echo $fuck`：发现输出是空白，说明该变量没被定义。★

`fuck="QNMB"`：定义局部变量。（你学过编程就知道这个东西怎么回事）★

**注意：**你定义的局部变量（用户变量）不能写成 大写，一定全是 小写 ，单词之间用下划线隔开。（企业中强制要求）。因为我们发现全局变量是用 大写 ，并且单词之间使用 下划线 隔开。（跟 C 语言命名全局变量一模一样）★★★

如果你定义成 大写，完了，成灾难了，别人看到以为是全局变量，一使用，undefine 。

### 004.定义全局变量

我们定义全局变量其实也应该用小写，只有系统级别的才大写。★

`export fuck="QNMB"`：定义全局变量。（该 shell 退出后再打开，就没了。但子 shell 中是能用的。它只限制在一个程序中。）

`unset fuck`：删除全局（局部）变量。（如果在子 shell 中删除了父 shell 定义的全局变量，那么只会删除在子 shell 范围的全局变量，对父 shell 不会造成影响。）★

全局的也建议使用小写，系统变量才用大写，非常重要。★★

### 005.默认的环境变量

很多自带的变量都是大写的，包括安装的 Java 和 Mysql，因为它们都是系统级别的。

常用的就是 PATH 和 HOME ，就没必要说了，网上都没讲，说明可能没啥用。你看看变量名就知道是干什么的了，就不用说了，说了也没意思。太多了，不可能背会的。★

要设置系统变量（这是非常危险的），无非就是设置 PATH 。因为下载 Java ，无非就是在 PATH 里面添加一个 Java 路径。无非就是这么用的。★

### 006.为啥要用它

有些开发工具不可能只是双击来打开它，可能需要在终端中进行使用，这时候就不得不配置环境变量。★

Linux 中的环境变量本质上跟 Windows 是一样的，没有区别。★

输入命令提示：command not found ：

1. 命令输错了
2. 命令没安装
3. 命令安装了，但没放在环境变量里

`PATH=$PATH:/home/fuck/Project`：将 /home/fuck/Project 路径添加进环境变量。（一次性配置）★

如果你将 VMware Tools 的安装包路径写进了环境变量，就不用 cd 进它的目录下去安装了，就可以直接安装，这就是环境变量的好处。★

我安装 Java 的时候不可能 cd 到 Java 路径下边去 javac ，我肯定想在任何地方都能 javac 。

### 007.永久配置？

Linux 开机的时候自动执行环境变量的文件（称为：启动文件）。

Linux 中有很多启动文件，如何区分？

`cat /etc/profile`：这就是启动时最主要的文件（不同发行版可能不同）。★

看某个发行版上如何配置环境变量，就使用上述命令，虽然看不懂，但是能够看懂有一个路径，有一个文件，这就 OK 了。★

上述命令中出现的路径和文件，可能需要去看看。★

我们不需要去了解各个发行版的这些内容，只需要知道怎么改环境变量就行。★

系统相关的东西，像 /etc ，了解一下就行，不要去碰，知道不同发行版的怎么去查看就行了。★

`cat /home/fuck/.bashrc`：看看 home 里面的 bashrc ，里面有一些有趣的东西，眼熟的东西。★

#### 最常见的环境变量配置目录（根据不同的发行版）：

1. ~/.bashrc
2. ~/.bash_profile
3. ~/.profile
4. ~/.bash_login

我们只能找到这些文件去编辑它，才能真正的永久修改环境变量。★

这就是为什么有些人明明配置了环境变量，还是 command not found，因为不同的发行版配置文件还真不同，需要自己去查看的。★★

如果 CentOS 既有 .bashrc ，也有 .bash_profile ，那他肯定先找 bashrc，再找 bash_profile ，因为自己去看 CentOS 源码，不解释。★★

.bashrc 里面还有一些有意思的东西。里面有个 别名 ，你在这里面修改了，就是永久配置了。★

如果要配置环境变量的话，必须在里面追加，就需要用到一些编辑器。还必须要先教编辑器，就作为作业吧，期末作业，入门的。学到最后可以随意的折腾全局变量，但是不能把它们删了，删了好多命令都不能运行了。★★★

home 里面还有个 .profile 文件，进去看看。★

## 008.安装软件

### 000.PMS和软件安装的介绍

最主要的就是 4、5 章，实战性比较强，后面理论性比较强，但是还必须要知道。★

很多人总以为软件安装非常的容易，要放到前面去讲。你连自带的命令都玩儿不会，还去玩儿人家写的软件？天方夜谭。

#### 为什么要使用 PMS？

曾经在 Linux 上安装软件是一件痛苦的事情。但现在开发者都聪明了，它们将软件打包。你解压缩就可以用了，或者从软件上下载。但你还是得花点功夫，况且有些网站还不全。有些软件它不发布在 github 上，并且在有些发行版上它还是有问题的，这在早期就非常恶心。★

后来人们觉得到处找软件太麻烦了，为什么不让人们来管理软件，这样在一个地方就能找到，大部分软件都能找到呢？于是就出现了类似应用商城的概念。当然那个时候还没有这种概念。这种概念 **叫做** ：package management system (简称：PMS) —— **作用** ：软件安装、更新和卸载。★

但是很恶心的是在不同的发行版上，包管理系统 **不同** 。这就是为什么在 Ubuntu 上可以使用 apt-get ，而 CentOS 上则不行。★★

不同的发行版将它们的软件放在它们的服务器上，供我们去下载。这就是为什么要换国内的镜像源，因为国外的，它卡。★

为什么曾经要使用 PMS ，还有一个恶心的点：工具依赖 —— 就相当于我装个英雄联盟，必须要装个 Wegame 一样，就这种感觉。（假设 wegame 是必须要装的，当然其实没必要）★

真正的工具依赖 ：QQ空间 —— QQ号

以前这个问题还是无法解决的，比如：你在 Linux 上安装了 QQ 空间，不能运行，它还不会提醒你，你需要安装 QQ 。我不知道哪些软件需要安装依赖，这个只有 PMS 能够做到了。★★

---

#### 在后面讲软件安装的原因：

以前讲的那些 shell ，在不同的发行版上几乎都是一样的，唯独这个 PMS ，会不同。这就是为什么要在后面来讲这个问题。★

所以那些跳过来看的，你就懵逼了，你根本就不知道这些是什么东西。

#### 不同发行版的常见 PMS 工具：

dpkg ：最常见的是如下三个 ：apt-get、apt-cache、aptitude （最常见）。（Ubuntu 基于它）

使用这种命令的 **好处** ：解决工具依赖问题。推荐使用第三者（aptitude）。只有它，才能彻底帮你解决工具依赖问题。★★

很多人使用 apt 习惯了，实际上应该使用 aptitude 。★

aptitude 虽然能够看得清晰，但是没人维护，那以后就不要用了。★★★

目前越来越多人使用 apt 代替 apt-get ，也推荐。★

现在都不流行 apt-get 了。★

`sudo apt install vim`：安装 vim 。

有一些非常有趣的命令：sl 、cmatrix ，非常炫酷，没啥屌用。★

rpm ：（Red Hat 基于它）

### 001.安装、更新、卸载

PMS 的好处：安装之后它自动给你干到环境变量里。★

`apt -h`：查看一下有哪些操作。★★

更新：先 update ，再 upgrade 。

卸载：remove 。

### 002.其他发行版？

server 版的 Linux 修改镜像源：修改 /etc/apt/souces.list 文件（网上搜）。★

Red Hat PMS：yum（最常见）、urpm、zypper 。★

yum 这个就不用多说了吧，进入 help 里面看看就知道了。★

这些软件的命令都在进行统一，无非就是包管理器不一样。所以有时候我们必须要适应不同的发行版，应该如何去操作。

### 003.安装第三方软件

github 上有一个非常有意思的项目：thefuck ：有些命令输错了，你直接输 fuck ，它会提示你。★★

安装这种软件，我们首先去看它的软件介绍。★

拿到一个项目，首先去看 README.md 文档。源码有兴趣就去看，没兴趣看 README 。★★

PMS 解决了工具依赖的问题，但是安装第三方软件，就必须手动去处理这些问题，所以需要看 README.md 。

MacOS 使用 Homebrew 。为什么说苹果电脑屌呢？因为它的那个 Homebrew 工具太强大了，它可以帮你解决这个项目的工具依赖问题，直接一句话就搞定。★

pip 可以设置代理，也可以配置阿里源。★★

#### 提前学习一下 Vim：（没安装 Vim 可以使用 vi ）

友情提醒：Linux 终端 Ctrl + Shift + c 拷贝，粘贴同理。

下载好 thefuck 项目后，需要进行 **配置** ：

输入命令 fuck，它会提示你修改配置，将那句话复制下来。

`vim ~/.bashrc`进入文件进行编辑，按 j 跳到最后一行，按 o ，它会跳到下一行，可以进行插入。将上面复制的那句话 Ctrl + Shift + v 粘贴，按 Esc ，冒号，wq 保存退出。最后执行`source ~/.bashrc`，配置完成。★

#### 安装软件的步骤：

1. 看软件是干什么的
2. 看依赖
3. 看对应操作系统的安装方式
4. 看如何维护、更新、使用

## 009.用户和权限

### 000.含义和作用

用户权限是很重要的。★

以前在 XP 的时代，没有管理员，所有的用户都具有管理员权限。这就是为什么它容易中毒。为什么老电脑容易中毒？就是权限没有分配好。

如果没有权限，大家权限都一样，这就不安全。别人在你电脑上创建一个用户，拥有至高无上的权限，就把你主机干了，那不是黑客吗。★

Linux 稍微比 Windows 安全一点。没有绝对安全的，只有相对安全。你防护的牛逼，病毒更屌。总有人钻漏。★

每个用户都有一个 ID （身份证）：UID。★

Ubuntu 查看用户：可以在设置里看，也可以在终端看：

`cat /etc/passwd`：查看用户。第一行是 root ，最后是自己的用户。这些中间的，叫做 系统账户。（有一些软件和服务需要这些账户，需要单独的账户去运行它们。）不用去刻意理解。★

及其不推荐使用 root 去登录，没有提示，容易删掉一些东西，就炸了。★★

为什么 Linux 大费周折创建这么多系统账户，就是为了安全问题，不把所有的东西都挂在 root 下，以免你的 root 被黑客攻破了，不至于能够操作所有的系统的东西。★

Linux 为系统账户预留了 UID 小于 500 的。你看到小于 500 的就不要去动它。★★

在上述文件中，你的密码是使用 x 替代的。第三个是 UID ，第四个是 GID ，第五个是 用户的描述，最后是该用户默认使用的 bash shell 。★

#### shadow 文件介绍：

`cat /etc/shadow`：用户密码。（用户后面有个 * ，是系统用户；! 表示暂时还没有密码。★

冒号后面的数字：第一个：从 1970.1.1 开始，过去多少天之后修改的密码（最后一次修改密码的时间）；第二个：多少天之后能修改密码；第三个：过了多少天之后必须修改密码；第四个：如果密码过期了，提前多少天提醒用户更改密码；第五个：如果密码过期了，多少天之后禁用账户；第六个：禁用日期（用天数表示，从 19701.1 开始）；最后一个：可能是预留的字段，Frank 也不知道是啥。★★

非常恶心，因为服务器要用到这些东西，个人用户基本上用不到。

### 001.创建用户，删除，更改

可以在设置中创建，也可以在终端中创建。

`sudo useradd fuck`：添加一个 fuck 账户。★

`sudo userdel fuck`：删除 fuck 账户。★

我们可以在配置文件中更改账户的配置。

`usermod`：更改用户配置。

`sudo passwd fuck`：修改 fuck 的密码。（缺陷：只能有 root 用户才能使用）★

#### chpasswd：★

如果系统中用户太多了，使用`chpasswd`。它非常屌，它可以从一个 txt 文件中去读，读完之后加密再给用户设置。但是它的文件是有讲究的：

chpasswd 要读取的文件 passwd.txt（用户名:密码）：

```
user1:123456
user2:456789
```

然后：`sudo chpasswd < passwd.txt`。

---

`chsh`、`chfn`、`chage`：修改某些特定的账户信息。（自己去研究一下，当作课外作业，自己去扩展一下知识）★

如果要修改上面说的那些日期参数，使用 `chage`。怎么用自己去看一下，用一用就知道了。怎么看我都教给你们了，这是非常重要的，教给你们自己学习的机会，不是我教一点，你学一点。（注意：有些参数是从 1970.1.1 开始）★

`chage`好用的就是 -E ，设置过期日期，这也是运维工程师常用的命令。★

### 002.group组

组的目的：共享资源。★

这个不同的发行版又可能不同了，非常恶心，有的发行版创建一个组直接把所有人都纳入这个组，这是很不好的。前端不该看到的东西它看到了，那肯定不好。

而有些发行版给每个用户单独创建一个与用户名同名的组，就很牛逼了，比如：Ubuntu 。

`tail /etc/group`：查看组。第一个参数：组名；第二个：组密码；第三个：组 ID；最后一个：组列表。（哪些用户属于该组）★

不要妄想去修改这个文件去修改组，非常危险。有的人有通过某种手段修改这个文件，来获取权限的心思。

使用`usermod`修改组。自己去研究，课后作业。★

`groupadd`：创建组。★

`groupmod`：修改组。★

`groupdel`：删除组。★

讲完这个我们来讲最难的一部分。

### 003.文件和文件夹权限

纯理论知识，但是非常重要。★

第一个 rwx ：帮派创始人的权限。

第二个：帮派下属的权限。

第三个：其他帮派成员的权限。

### 004.作业：自学chmod

`chmod`八进制语法是最骚的。★

还是倡导大家去自学，他讲的比我好，说实话。—— 菜鸟教程的 chmod 。★

删库跑路都是小儿科，有些人最后还给你玩儿这么一套：`chmod 000`：所有的用户都不能读。★

这是你们的作业，而且还是重点。★

### 005.章节结束语

有些东西基本上用不到，你会发现越讲，理论知识越多。★

理论知识怎么去补呢？不要想着通过课的方式去补，那太烦恼了。通过网课的方式，你会发现效率不高，它讲的还枯燥、乏味，有的时候还不好理解。我的推荐是：Linux 的理论知识，用的时候再学，不用的时候可以翻一翻。就当个每天的日记一样，没事儿的时候可以翻一翻，看一看。因为有的东西可能很多人都用不到。比如说有些走软件的，不管你前端还是后端，你说磁盘管理有什么用呢？云服务都给你处理好了，你根本就不需要管这些问题。现在不是原来那个时代了。但有些运维的同志会用到了，你会发现就只有那几个命令（删除所有分区，格式化，创建）。而且你去买的服务器（像阿里云这种，它都自带一键格式化的功能）。★★

这个时代，这个不作为重点，但有的人可能会用到。要用到的话在去学都不迟，因为就那几个命令，没别的。★

绕来绕去，最终都需要自己去学，但这些基础没人教给你。

基础命令都会了，其他的你看文档，马上就会了。如果命令的介绍你都看不懂，肯定就用不到，如果能用到肯定能看得懂。

Linux 就是到最后不要求你全部命令都会，要求你有自学的精神。这个太重要了。★★★

到后面你会发现命令越来越多，理论越来越多，但是最常用的还是那么几个（什么 cd 、ls ）。

学无止境。

学软件的其实前五章学会，应该问题不大，基础就够了。后面的可以了解一下。听懂，然后操作一下。前面的必须全部掌握。★

## 010.编辑器之神VIM

### 000.简单介绍

这个可以跳着看。

有的人跳着看的，能理解，这个对于学软件的人来说，是最能装的一个环节，太骚了。★

Ubuntu 自带了一个编译器，太丑了，而且服务器哪来的界面版的，你点个屁啊。

#### Linux 编译器：

vi：最初在 Unix 上的。

nano：后来出现的。

emacs：神之编译器。★

vim：编译器之神。★

KWriter

还有 GNOME 的那两个。

命令版的就算前三个吧。还有个 vim 。

现在都是 Emacs 和 Vim 用的多，听名字就霸气，而且非常难学。★

Vim 如果不装插件，没有代码提示，那肯定要 10 几年的经验。有的人装插件，就没意思了，就显示不出你的牛逼。★

业界里有一句非常牛逼的话：牛逼的人总是让工具变得难用，来提高自己。因为只有工具难用了，你才知道怎么去提高自己。这个说法可能是扯淡的说法，但是也存在。

Vim 难，但是学会之后你感觉其他的编译器都是垃圾。

**提醒** ：在 CentOS 上它显示的是 vi ，但是用别名去调用它（`alias vi`）的时候它显示的是 Vim 。★

### 001.vim的简单使用

学的时候简单，习惯起来就不容易了。★

Vim 有两种模式（有的人说三种，你国际上跟别人说，别人也模模糊糊的）：★

1. 普通模式（命令操作模式）：操作文件。
2. 插入模式：编辑的时候。

即：除了插入，其他都是普通模式。如：记事本，只有输入东西的时候才是插入模式，其他什么查找、保存，都是普通模式。★★

就这么简单，有些人跟你搞个三个模式 。。。玩儿来玩儿去自己都不知道怎么回事。★

#### 操作：

按下 i 键（英文：insert），进入插入模式，左下角会发生变化。★

ESC 键：退出插入模式。（按下之后左下角的 INSERT 就不见了，光标开始闪。）★

`:wq`：（冒号 wq ）保存退出。★

`:w`：保存，不退出。★

就这么简单，没啥别的，后面再学进阶的。

### 002.移动

有的人使用上下左右去移动光标，有的人使用鼠标，那太慢了，你想想你改个字母花了几秒？★

市面上有一个键盘：HHKB（C++创始人在用），方向键需要靠组合键来实现，目的就是为了让你不用方向键。★

**务必记住这几个键** ：hjkl 。★

键盘指法是有讲究的，这样打字才快。★

作业：练习半小时，使用上述四个键，移动到你们想移动到的位置。

### 003.翻页

Ctrl + F、Ctrl + B：翻页。（不要使用 Page Up、Page Down）★

Ctrl + E、Ctrl + Y：内容滚动。

shift + g (大写 G) ：移动到末尾。

gg ：移动到开头。

#### Vim 模式问题：

开始不想讲复杂了，所以说有两种模式。有人说有三种，也是对的。

国内很多人说三种：移动 —— 普通模式；输入冒号的瞬间 —— 命令模式；输入 i —— 插入模式。★

命令模式不想输入也可以按 ESC 退出。★

`:q!`：不保存退出。★

常见的命令：`:q`、`:wq`、`:q!`、`:w` 。★

后面在说一些更常见的。

### 004.不同方式编辑文本，以及跳跃单词

这些东西都需要去练习，这是习惯问题，这就是为什么学到这，有些人就觉得难了。★

这些都是基础的，但学到这，问题不大。即便如此，还不 OK 。★

习惯了 Vim ，就再也回不去使用鼠标了。★

移动光标，我们学的只是皮毛。★

#### 骚操作：

i ：插入到光标位置的前面；a ：插入到光标位置的后面。★★

o ：直接跳到下一行输入。

x ：删掉光标位置的字符。

dd ：删除一行。

u ：撤销。

dw ：移除光标位置往后一个单词。

b ：跳到单词的首字母。

e ：跳到单词末尾。

v ：进入视图，ec ，替换单词。

w ：跳跃单词（先跳到首字母，再越过单词，到下个单词的首字母）。（b：往前跳，跳到首字母；e：往后跳，跳到单词末尾。）（务必掌握这三个的用法，其中 w 、b 是联动的。）★★★

大跳：Shift + W、B、E。

怎么样，很骚吧？这回够你们玩儿了。

学会了 Vim 卧槽，其他的编译器都是垃圾。Emacs 除外，唯一能与之匹敌的。

### 005. 跳跃行首行尾

Shift + 6 ：跳到本行开头。

Shift + 4 ：跳到本行末尾。

0 ：跳到本行开头，包括 Tab ，空格。

r ：替换字母。

Shift + r：往后一直替换，知道按 ESC 退出。

这些要会。★

在普通模式里，千万别使用退格键，和 Delete 键。这两个可能是命令。★★

### 006.大括号跳跃函数段落

按 {} ：跳跃函数。

讲的都是常用的，要会。★

### 007.vim复制剪切粘贴

Vim 中有一个缓冲区，单独的去放复制、剪切的数据。

有些人觉得只有复制、剪切的时候才缓存，其实不然，删除的时候也会。删除可以当剪切使用：先 dd 一行，然后在下面的某一行按 p ，即可粘贴。★

Vim 里其实没有删除这一说法，那是剪切。

yw ：往后复制一个单词。

y$ ：复制一行，从当前位置到行末。

复制的 **缺点** ：不知道复制的啥，只有粘贴出来才知道。

解决方法：见下节课。

### 008.Visual可视化模式

按 v ，进入可视化模式，然后使用移动命令选择文本，y 复制，p 粘贴。★

大 v ：按行选择。

删除所有代码：gg v G d 。

选中的时候可以按 o ，来使光标在选中的头尾跳跃。★

v 可以自由搭配跳跃命令。

Ctrl + v ：矩阵选择。

0 ：补全角落。

`#`：从当前字符跳到下一个该字符处。

v a w ：快速选择单词。★

v a b ：带上单词旁边的括号。★

v a B ：大括号。★

v a < ：尖括号。★

所以你看大佬写代码非常快，用 Vim ，你都不知道它怎么把代码删掉的。

还有很多，可以试一试，也不常用，常用的就这几个。★

### 009.视图模式其他的用法

v 选中多行，右尖括号（>），向前缩进。

v < ：向后缩进。

v ~ ：大小写转换。

v U ：转换为大写。

v u ：小写。

编辑文本最基础的就到这，再讲下去就太复杂了。下节课说下其他的问题。

### 010.查找和替换

/const ：查找，n 下一个。

`:s/let/const/g`：将本行的所有 let 替换成 const 。

`:%s/let/const/g`：将所有的 let 替换成 const 。

`:set nubmer`：临时显示行号。

`:9,15s/let/const/g`：替换 9-15 行。

`:%s/let/const/gc`：（c：comment，CSDN 上有人说是 confirm；g：globe）带提示。

Vim 的查找和替换非常迅速，比你想象的还要快。★

### 011.vim的基础配置

$HOME 目录创建一个 .vimrc 文件，编辑它，保存后`source .vimrc`：source 命令更新终端的资源。

.vimrc ：

```
set syntax=on // 语法高亮
set tabstop=4 // 统一要求的, tab 的距离
set softtabstop=4
set shiftwidth=4 // 更改缩进方式
set number // 行号
set enc=utf-8
// set langmenu=zh 设置中文，这里就不设置的，设个屁的中文
set showmatch // 括号匹配
```

> .vimrc 注释：在左侧输入一个双引号。如：

```
" this is a comment
```

可以从 github 或者网站上搜索程序员经典必备的配置。★

会配置不重要，会编写代码比会配置重要多了。配置的花里胡哨，会不会用还是一回事。★

#### 跳跃行号：

`50 gg`：跳跃到 50 行。★

---

网上有很多基于 vim 的项目：vim.org，各种各样的插件。

`vim .`：编辑当前文件夹。★

vim 到这常用的已经够了。★

有两种人用 vim ：

1. 在服务器上临时写一些东西。
2. 喜欢 vim

vim 根据个人习惯来，它对十年以前经验的人不友好，你要自己导包，没有提示，你想想要对代码底层多么熟悉。

好的工具能提高效率，但是不能提升自己，所以大佬就让自己的工具难用。又回到了最初的话题。★

千万不要让工具害死了你，你越是把工具用的得心应手，越是使用一些奇葩的插件，越是显示出你没有水平，因为你总是依赖于一些插件，最终就没水平。

人家拿苹果电脑，是`vim .` ，你拿苹果电脑，就是点点点，这就是你和人家的区别。

## 011.server

### 000.Linux Server

有一个开源的连接软件: PuTTY 。有的人使用破解的 XShell ，也不怕电脑中毒。★★

开源的软件就是牛逼，你看人家牛逼的软件界面都是这样的，哪来那么多花里胡哨的。★

你看 Vim 的网站，十几年前的网站，这就是为什么人家说使用 Vim 的人有爱心，是吧。意思就是这个意思，牛逼的东西从来都不花里胡哨的。★

现在你们学会了，这种界面版的就可以滚蛋了。可以弄一个 aliyun ，搞个服务器玩儿玩儿。阿里云学生便宜，不是学生就贵了，然后使用 PuTTY 去连。★

阿里云的服务器是目前国内做的最好的，什么腾讯、华为，我只能一句话 —— 呵呵。但是，阿里云的文档跟微软亚马逊比起来，就跟上世纪八十年代的一样，完全就不知到它在讲什么。国内的文档写的越来越垃圾，产品体验越来越不行。题外话。腾讯吧，人家阿里云服务器做的还行，你腾讯文档不行，服务器也不行，就啥都不行。但是产品做的倒是挺成功，因为提前占领了市场，捆绑了用户。

买服务器的好处太多了，你可以把你们的作品放在上面，做毕业设计这些。★★

#### 安装 Server 虚拟机：

像往常一样安装，开机后选择第一个，安装 Server 版的。如果有些东西你不懂，就直接 Done。

#### 换源：

将它的地址换成：https://mirrors.aliyun.com/ubuntu/ 。

### 001.后话

### 002.SSH

使用 SSH 去连必须要在 Linux 中下载 SSH 。★

连上后先更新/升级软件。★

网上买的服务器的话去它的管理页面，找到公开 IP ，就可以连了，当然这里我们使用的是内网。★

如果不喜欢使用工具，我们也可以使用 Windows 自带的 PowerShell 去连：ssh username@ip_address。★

### 003.提及WSL

也可以使用 WSL ，2018 年之后开始流行：在 Microsoft Store 下载 Ubuntu。（前提：控制面板中找到程序 -> 启用和关闭 Windows 功能 -> 勾上 适用于 Linux 的 Windows 子系统。

### 004.Linux最后的结束语

看到这，恭喜你，你 Linux 入门阶段就算是完成了，剩下的就看你自己去探索，或者说在企业当中去探索。

如果你是运维的、安全的，那你还要继续学一些东西，涉及一些东西；如果你是前后端的，那到这就够你玩儿了。★

剩下的路该怎么走呢？只有你不停的向前，你才知道你接下来要做什么。而不是停滞，停滞的话你就不知道自己想要做什么。哪怕你接下来的路真的迷了。人生就像走迷宫一样，大家都不知道怎么走，都是迷迷糊糊的，就是一直往前走，竟然能走到出口。谁也不可能一开始就找到出路，那不太现实，而且这种手段是不可靠的。哪怕这几天你知道这是自己要做的事情，但是过了好几年，你又换了个行业，是吧，哈哈。

但是有一点是对的，那就是继续学习，拥有持续学习的精神，不管这条路是否继续走，都应该继续学习，这话死一种态度。因为对人类来说，没有什么比学习更能使你前进了。只有你继续学习，你才能发现问题，并且找到属于自己的点。★

我只有不停的学习，哪怕是撞墙了，也是一个学习的经历。我只有学习，不停的向前，才知道接下来的路怎么走，哪一个人生方向是属于我的出口。★

如果觉得好，希望将此视频分享，学 Linux 的都知道，黑客都知道，在软件行业，都是共享精神，这点非常重要，就是拥有知识的共享，拥有开源源代码，GNU Linux 的初衷也是这样的。如果林纳斯先生，这些开源的组织都不开源，我靠，我们不可能有今天的。如果技术不知道分享，大家都想着留一手，那不堪设想，这个社会不会好到什么程度。唯有共享，才会让这个世界变得更加美丽。就跟共享单车一样，走到哪都骑共享单车，一个道理。共享才是未来的出发点，否则也不会有开源项目，也不会有 github ，是吧。技术，一定要想办法把它分享出来，公诸于世，这样才有人来继承这个技术，或者说给你提很多意见。然后你在从中去学习，或者是说，你学到了不同的东西，这都是分享给你带来的。我们学 IT 的，就应该要有共享精神，都应该要有共享精神。不论做什么技术都不应该留一手，大家都明白这个道理了，我看高校名校的，都开始明白这个道理了，大家都在明白共享精神的重要性，论文、学术报告，分享出来，共享出来；学到的技术，写个博客、论坛，分享出来；遇到好的视频、资料，分享出来；写的好的代码，分享出来，才会让这个世界变得更好，这就是 Frank 最后给你们说的话。但愿你们能够胸有成竹，未来找到属于自己的一片天空，谢谢。★★★★★